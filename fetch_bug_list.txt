Nov. 17, 2019 12:36 AM

fetch.go needs the map data structure to use the SHA256 checksum of the webpage as a key and the URL as a value. URLs are misleading.

Here is an example from an output of fetch.go that makes my point clear:

https://www.mediawiki.org/wiki/

https://mediawiki.org/

Both lead to the EXACT same webpage yet they are different URLs. But a SHA256 checksum would make the equivalence of the two clear.

--------------------

The following lines are causing the crawler to crash at the weird URLs that do not lead anywhere:

Lines: 91, 363, 369, 381

The problem begins with the URL "https://plus.google.com/103654360130207659246"

Some complete URLS end with a ')' character and not a \".

---------------------

11/29/2019 8:58 PM

A fair bug was found that you would not have foreseen to be fair:

1. https://reddit.com

2. https://www.reddit.com

3. https://reddit.com/

I think Masen is right, just blacklist social media sites that are infamous for dynamically changing often.

Easy fix.


All of these are the exact same website page yet they are different URL strings.

Also the web crawler got stuck on a dynamic gif with the following URL:

https://www.reddithelp.com/en/categories/using-reddit/frontpage-and-subscriptions/image/gif%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253Bbase64%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252CR0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D


The computer naturally adds a "\" to the end of each URL.

It would be best if you check if the crawler finds a URL that begins with a "www.

---------------------------------------

11/29/2019 10:36 PM

For now, study the dynamic HTML page "reddithelpgif.txt" And see why the annoyingly long URL "https://www.reddithelp.com/en/categories/using-reddit/frontpage-and-subscriptions/image/gif%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253Bbase64%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252CR0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D" is causing an infinite loop.

It seems that Javascript functions are encased in <script>-like tags. How abouta map that finds the longest such script and matches it to the URL of the webpage? Clearly, although the URL or HTML content may change, the Javascript functions will not.

Although that sounds like a great idea, this will actually not work out. Since different, yet similiar webpages may have the same JS source code checksum. In fact, that is a great way to check if two websites are similiar: Concatenate all the JS source code embedded in a webpage and get the checksum of this long string. If the checksums match, you bet the pages are similiar. 

But it is not useful to check if two websites are unique against a dynamic webpage that changes its HTML contents and even its own URL.

It is best to use to concatenate all three forms of URLs (complete URL references, different domains, and sub domain URLs), convert that into a checksum. and map it with boolean return values. This will work against the degoogle and CorpFree subreddits as well as the reddithelpgifs.

Two tests:

1. reddit Page for CorpFree and reddit Page for degoogle

2. Two different versions of https://www.reddithelp.com/en/categories/using-reddit/frontpage-and-subscriptions/image/gif%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253Bbase64%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252CR0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D"

3. Testing difference between GitHub repos:

	1. github.com/Foss-Research-Team/Crawler

	2. github.com/tanveerasalim/Project_Test

According to Masen Poppe, you should just blacklist social media sites altogether. Social Media sites have a problem with sites that dynamically change both their content and their URL at the same time. I was planning to check the checksum for HTML and Javascript but that will not work since that is meant to block out sites that dynamically change their URL. It is not sufficient if you check that the Javascripts are identical, you also have to check the SHA256 of the entire HTML AND if the URLs between the two pages match.

So Masen advised:
	1. Just add the blacklist functionality. It is necessary.

	2. Add the sethostname functionality. That way, each crawler instance stays in the same hostname setting.


But it is not useful to check if two websites are unique against a dynamic webpage that changes its HTML contents and even its own URL.

It is best to use to concatenate all three forms of URLs (complete URL references, different domains, and sub domain URLs), convert that into a checksum. and map it with boolean return values. This will work against the degoogle and CorpFree subreddits as well as the reddithelpgifs.

In fact, the real difference you see in dynamic webpages that change their own URLs are...the URLs that are embedded in the HTML page...DUH. So strip away all the hyperlinks and you should end up with the same non-changing HTML page document. The HTML document does not have to be open, just consistent between dynamic webpages that actually are about the exact same website. Think about cutting away all the URLs embedded in the reddithelpgif.txt HTML page. You will find that there is no real difference between reddithelpgif.txt and reddithelpgif2.txt

In order for this to work, you will even need to strip "http://..." URLs.

No wait, I have an even better idea. Websites embed their own URLs in their own webpage, including dynamic ones. Just strip the website's own URL from the HTML page and find the checksum of that page. Now, the hard part of doing this is that the URL can change. Usually, a website that dynamically changes its own URL changes the very last directory in its subdomain string. So just check for the same URL right before the very last subdomain directory in the URL reference.

Okay, now when I use en.wikipedia.org as a base URL, the same kind of problem with reddithelpgif.txt happens:

https://en.m.wikipedia.org/w/index.php?title=Special:MobileOptions&amp;amp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Bamp%3Breturnto=Special%3AUserLogin&amp;mobileaction=toggle_view_mobile

Even the Colly Library has big problems with repeats. I noticed even Colly is undergoing repeats infinite amount of times, such as with Community_Portal.

Yes, the results with the Wiki Special Mobile page and reddithelpgif page both confirm that the true reason that both the HTML page contents change is that the websites stores its own URL in its own HTML page. If you can just omit the URL of a website's own page that will be excellent. It will fix the problem.


Better idea:

Look at the similarity between these two URLs:

1. "https://en.wikipedia.org/w/index.php?title=Special:MobileOptions"

2. "https://en.wikipedia.org/w/index.php?title=Special:MobileOptions&amp;3amp"

Have another look at the similarity between these URLs.

If you take a close look, you can omit everything in a URL starting from the first "&" character and still end up on the same page.


-------------------------------------------------------


12/1/2019

By now the bug is still this:

https://www.reddithelp.com/en/categories/using-reddit/frontpage-and-subscriptions/image/gif%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253Bbase64%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252CR0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D%25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525253D/r/Aberdeen/submit?url

Look at the very end of this very long URL. YOU made this bug happen. 

The only true improvement is that the subdomain is actually bleeding through tis incorrectly concatenated URL at the very end of it. Then the crawler function is recursively called with this mess of a URL.

The real URL: 

reddit.com/r/Aberdeen/submit?url


Good news! This problem is now fixed. Hooray!

The crawler is so expansive it literally bled into the github.com domain!

So there were two reasons the crawler kept failing:

1. You did not concatenate sub domain URLs correctly. 

You fixed that with the following line:

url = append(url,extract_domain(input_url)...)

2. You forced the crawler to copy a URL up until it sees an '&' character.

Everything after the '&' can dynamically change and is completely unnecessary to allow a website to load properly.

----------------------------------------

12/1/2019 10:37 PM

From now on, bugs focus on blacklist functionality.

There is a bug in blacklist_add. You need to concatenate "https://" in case it does not exist in the base URL.

Change of plans, only allow the hostname itself.

That is, in the complete URL: "https://hostname/..." it prints the hostname

-----------------------------------------

12/2/2019 3:46 AM

 Good news: Blacklist is essentially operational. Although it does not work for the very first URL. Fix that in the crawler method obviously.

-----------------------------------------


